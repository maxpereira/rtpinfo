<html>
<head>
	<title>RTP Stream</title>
	<style>
	table, th, td {
	  border: 1px solid black;
	  border-collapse: collapse;
	}
	</style>	
	<script type='text/javascript'>
	var rtpObj1 = "";
	var rtpObj2 = "";
	var rtpObj3 = "";
	
	function getRtpInfo() {
		console.info("Sending HTTP request 1...");
		req = new XMLHttpRequest();
		req.open("GET", "https://www.rtp.pt/play/livechannelonairnow.php?channel=at1");
		req.send();

		req.onreadystatechange = (e) => {
			console.log(JSON.parse(req.responseText));
			rtpObj1 = JSON.parse(req.responseText);
			get2();
		}
	}
	
	function get2() {
		console.info("Sending HTTP request 2...");
		req2 = new XMLHttpRequest();
		req2.open("GET", "https://www.rtp.pt/play/livechannelonairnow.php?channel=at2");
		req2.send();

		req2.onreadystatechange = (e) => {
			console.log(JSON.parse(req2.responseText));
			rtpObj2 = JSON.parse(req2.responseText);
			get3();
		}
	}
	
	function get3() {
		console.info("Sending HTTP request 3...");
		req3 = new XMLHttpRequest();
		req3.open("GET", "https://www.rtp.pt/play/livechannelonairnow.php?channel=at3");
		req3.send();

		req3.onreadystatechange = (e) => {
			console.log(JSON.parse(req3.responseText));
			rtpObj3 = JSON.parse(req3.responseText);
			parseObject();
		}
	}
	
	function parseObject() {
		for (var i=0;i<=4;i++) {
			document.getElementById(10+i+"Container").innerHTML = "<b>"+rtpObj1[i]["dtitulo"];
			if (rtpObj1[i]["dcoment1"] != "") {
				document.getElementById(10+i+"Container").innerHTML += "</b><br>"+rtpObj1[i]["dcoment1"];
			} else {
				document.getElementById(10+i+"Container").innerHTML += "</b><br>Nenhum artista"
			}
		}
		
		for (var i=0;i<=4;i++) {
			document.getElementById(20+i+"Container").innerHTML = "<b>"+rtpObj2[i]["dtitulo"];
			if (rtpObj1[i]["dcoment1"] != "") {
				document.getElementById(20+i+"Container").innerHTML += "</b><br>"+rtpObj2[i]["dcoment1"];
			} else {
				document.getElementById(20+i+"Container").innerHTML += "</b><br>Nenhum artista"
			}
		}

		for (var i=0;i<=4;i++) {
			document.getElementById(30+i+"Container").innerHTML = "<b>"+rtpObj3[i]["dtitulo"];
			if (rtpObj1[i]["dcoment1"] != "") {
				document.getElementById(30+i+"Container").innerHTML += "</b><br>"+rtpObj3[i]["dcoment1"];
			} else {
				document.getElementById(30+i+"Container").innerHTML += "</b><br>Nenhum artista"
			}
		}
	}
	</script>
</head>
<body onload="getRtpInfo();">
<table style="">
  <tr>
    <th>Antena 1</th>
    <th>Antena 2</th>
    <th>Antena 3</th>
  </tr>
  <tr>
    <td>
		<p id="10Container"></p>
	</td>
    <td>
		<p id="20Container"></p>
	</td>
	<td>
		<p id="30Container"></p>
	</td>
  </tr>
  <tr>
    <td>
		<p id="11Container"></p>
	</td>
    <td>
		<p id="21Container"></p>
	</td>
	<td>
		<p id="31Container"></p>
	</td>
  </tr>
    <tr>
    <td>
		<p id="12Container"></p>
	</td>
    <td>
		<p id="22Container"></p>
	</td>
	<td>
		<p id="32Container"></p>
	</td>
  </tr>
  <tr>
    <td>
		<p id="13Container"></p>
	</td>
    <td>
		<p id="23Container"></p>
	</td>
	<td>
		<p id="33Container"></p>
	</td>
  </tr>
    <tr>
    <td>
		<p id="14Container"></p>
	</td>
    <td>
		<p id="24Container"></p>
	</td>
	<td>
		<p id="34Container"></p>
	</td>
  </tr> 
</body>
</html>